<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="fragments.html :: head"></head>
<body class="c-app">
<div th:replace="fragments.html::leftMenu"></div>
<div class="c-wrapper c-fixed-components">
    <header th:replace="fragments.html::header ('고객 관리', '고객 등록')"></header>
    <div class="c-body">
        <main class="c-main">
            <div class="container-fluid">
                <div class="fade-in">
                            <div class="card">
                                <div class="card-header">고객 등록</div>
                                <div class="card-body">새로운 고객을 등록합니다.</div>
                                <div class="card-body">
                                    <form class="form-horizontal" action="" method="post" enctype="multipart/form-data">
                                        <div class="form-group row">
                                            <div class="col-md-4">
                                                <!-- Avatar -->
                                                <img class="img-fluid float-left rounded img-thumbnail" width="400" height="400"
                                                     src="http://1hoon.iptime.org/images/beauty/work-1.jpg"/>

                                            </div>
                                            <div class="col-md-8">
                                                <div class="form-group row">
                                                    <label class="col-md-2 col-form-label">고객 번호</label>
                                                    <div class="col-md-10">
                                                        <p class="form-control-static">1</p>
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label class="col-md-2 col-form-label" for="name-input">고객 명</label>
                                                    <div class="col-md-10">
                                                        <input class="form-control" id="name-input" type="text" name="name" placeholder="고객명을 입력하세요(필수)">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label class="col-md-2 col-form-label" for="type-input">종류</label>
                                                    <div class="col-md-10">
                                                        <input class="form-control" id="type-input" type="text" name="type" placeholder="종류를 입력하세요(필수)">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label class="col-md-2 col-form-label" for="telNo-input">전화번호</label>
                                                    <div class="col-md-10 input-group">
                                                    <span class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <svg class="c-icon">
                                                                <use xlink:href="/node_modules/@coreui/icons/sprites/free.svg#cil-phone"></use>
                                                            </svg>
                                                        </span>
                                                    </span>
                                                        <input class="form-control" id="telNo-input" name="telNo" type="tel" placeholder="전화번호를 입력하세요(필수)">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label class="col-md-2 col-form-label" for="date-input">가입일</label>
                                                    <div class="col-md-10">
                                                        <input class="form-control" id="date-input" type="date" name="date-input" placeholder="date">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label class="col-md-2 col-form-label" for="tags-input">태그</label>
                                                    <div class="col-md-10">
                                                        <div id="whitelist" hidden>[{"value":"cat"}, {"value":"dog"}]</div>
                                                        <input id="tags-input" type="text" name="tags" aria-describedby="tagHelp" />
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label class="col-md-2 col-form-label" for="bigo-input">비고</label>
                                                    <div class="col-md-10">
                                                        <textarea class="form-control" id="bigo-input" name="bigo" rows="9" placeholder="비고 내용을 입려하세요"></textarea>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                <div class="card-footer">
                                    <button class="btn btn-primary btn-lg btn-block" type="button">등록</button>
                                </div>
                            </div>
                </div>
            </div>
        </main>
        <footer th:replace="fragments.html::footer"></footer>
    </div>
</div>
<link href="/node_modules/tui-grid/dist/tui-grid.css" rel="stylesheet">
<link rel="stylesheet" href="/node_modules/@yaireo/tagify/dist/tagify.css">
<style>
    .tagify__input{
        margin: 0;
    }
    .tagify{
        border: 0;
        padding: 0;
        margin: 0;
    }
</style>
<script th:replace="fragments.html::script"></script>
<script src="/node_modules/jquery/dist/jquery.js"></script>
<script src="/node_modules/tui-grid/dist/tui-grid.js"></script>
<script src="/node_modules/@yaireo/tagify/dist/tagify.min.js"></script>
<script type="application/javascript">
    $(function(){
        function tagRequest(url, tagTitle)
        {
            // $.ajax({
            //     dataType : "json",
            //     autocomplete : {
            //         enable : true,
            //         rightKey : true
            //     },
            //     contentType : "application/json; charset=utf-8",
            //     method : "POST",
            //     url : "/settings/tags" + url,
            //     data : JSON.stringify({"tagTitle" : tagTitle})
            // }).done(function(data, status){
            //     console.log("${data} and status is ${status}");
            // });
        }

        function onAdd(e)
        {
            tagRequest("/add", e.detail.data.value);
        }

        function onRemove(e)
        {
            tagRequest("/remove", e.detail.data.value);
        }

        var tagInput = document.querySelector("#tags-input");
        var tagify = new Tagify(tagInput, {
            pattern: /^.{0,20}$/,
            whitelist: JSON.parse(document.querySelector("#whitelist").textContent),
            dropdown : {
                enabled: 1, // suggest tags after a single character input
            } // map tags
        });
        tagify.on("add", onAdd);
        tagify.on("remove", onRemove);
        tagify.DOM.input.classList.add('form-control');
        tagify.DOM.scope.parentNode.insertBefore(tagify.DOM.input, tagify.DOM.scope);
    });
</script>
</body>
</html>